const headquarters = [
  {
    desc: "СОП-1",
    category: "Строительные",
    full: "Штаб СО Коми государственного педагогического института",
    image: "/static/images/logo/squad-logo.png",
    peoples: 12,
    createdAt: "2022-12-10",
    education: "Амурская государственная медицинская академия",
  },
  {
    category: "Проводников",
    desc: "СОП-1",
    full: "Штаб СО Новосибирского Государственного Педагогического Университета",
    image: "/static/images/logo/squad-logo.png",
    peoples: 19,
    createdAt: "2023-02-10",
    education: "Амурский государственный университет",
  },
  {
    category: "Медицинские",
    desc: "ССО",
    full: "Штаб СО Новосибирского Государственного Педагогического Университета",
    image: "/static/images/logo/squad-logo.png",
    peoples: 5,
    createdAt: "2021-12-01",
    education: "МГУ",
  },
  {
    category: "Педагогические",
    desc: "СОП-1",
    full: "Штаб СО Новосибирского Государственного Педагогического Университета",
    image: "/static/images/logo/squad-logo.png",
    peoples: 8,
    createdAt: "2020-11-10",
    education: "Университет имени Баумана",
  },
  {
    category: "Строительные",
    desc: "СОП-1",
    full: "Штаб СО Новосибирского Государственного Педагогического Университета",
    image: "/static/images/logo/squad-logo.png",
    peoples: 7,
    createdAt: "2021-02-12",
    education: "Амурская государственная медицинская академия",
  },
  {
    category: "Сервисные",
    desc: "СОП-1",
    full: "Штаб СО Новосибирского Государственного Педагогического Университета",
    image: "/static/images/logo/squad-logo.png",
    peoples: 14,
    createdAt: "2012-12-01",
    education: "Амурский государственный университет",
  },
  {
    category: "Сельскохозяйственные",
    desc: "СОП-1",
    full: "Штаб СО Новосибирского Государственного Педагогического Университета",
    image: "/static/images/logo/squad-logo.png",
    peoples: 12,
    createdAt: "2020-12-18",
    education: "МГУ",
  },
  {
    category: "Медицинские",
    desc: "СОП-1",
    full: "Штаб СО Новосибирского Государственного Педагогического Университета",
    image: "/static/images/logo/squad-logo.png",
    peoples: 22,
    createdAt: "2021-04-13",
    education: "Университет имени Баумана",
  },
  {
    category: "Педагогические",
    desc: "СОП-1",
    full: "Штаб СО Новосибирского Государственного Педагогического Университета",
    image: "/static/images/logo/squad-logo.png",
    peoples: 12,
    createdAt: "2022-12-10",
    education: "Амурская государственная медицинская академия",
  },
  {
    category: "Путинные",
    desc: "СОП-1",
    full: "Штаб СО Новосибирского Государственного Педагогического Университета",
    image: "/static/images/logo/squad-logo.png",
    peoples: 2,
    createdAt: "2022-12-10",
    education: "Амурский государственный университет",
  },
  {
    category: "Сервисные",
    desc: "СОП-1",
    full: "Штаб СО Новосибирского Государственного Педагогического Университета",
    image: "/static/images/logo/squad-logo.png",
    peoples: 5,
    createdAt: "2022-12-10",
    education: "МГУ",
  },
  {
    category: "Строительные",
    desc: "ССО",
    full: "Штаб СО Новосибирского Государственного Педагогического Университета",
    image: "/static/images/logo/squad-logo.png",
    peoples: 14,
    createdAt: "2022-12-10",
    education: "Университет имени Баумана",
  },
  {
    category: "Проводников",
    desc: "СОП-1",
    full: "Штаб СО Новосибирского Государственного Педагогического Университета",
    image: "/static/images/logo/squad-logo.png",
    peoples: 22,
    createdAt: "2022-12-10",
    education: "Амурская государственная медицинская академия",
  },
  {
    category: "Медицинские",
    desc: "ССО",
    full: "Штаб СО Новосибирского Государственного Педагогического Университета",
    image: "/static/images/logo/squad-logo.png",
    peoples: 10,
    createdAt: "2022-12-10",
    education: "Амурский государственный университет",
  },
  {
    category: "Педагогические",
    desc: "СОП-1",
    full: "Штаб СО Новосибирского Государственного Педагогического Университета",
    image: "/static/images/logo/squad-logo.png",
    peoples: 4,
    createdAt: "2022-12-10",
    education: "МГУ",
  },
  {
    category: "Сельскохозяйственные",
    desc: "СОП-1",
    full: "Штаб СО Новосибирского Государственного Педагогического Университета",
    image: "/static/images/logo/squad-logo.png",
    peoples: 6,
    createdAt: "2022-12-10",
    education: "Университет имени Баумана",
  },
  {
    category: "Сельскохозяйственные",
    desc: "СОП-1",
    full: "Штаб СО Новосибирского Государственного Педагогического Университета",
    image: "/static/images/logo/squad-logo.png",
    peoples: 25,
    createdAt: "2022-12-10",
    education: "Амурская государственная медицинская академия",
  },
  {
    category: "Сельскохозяйственные",
    desc: "СОП-1",
    full: "Штаб СО Новосибирского Государственного Педагогического Университета",
    image: "/static/images/logo/squad-logo.png",
    peoples: 11,
    createdAt: "2022-12-10",
    education: "Амурский государственный университет",
  },
  {
    category: "Медицинские",
    desc: "СОП-1",
    full: "Штаб СО Новосибирского Государственного Педагогического Университета",
    image: "/static/images/logo/squad-logo.png",
    peoples: 17,
    createdAt: "2022-12-10",
    education: "МГУ",
  },
  {
    category: "Педагогические",
    desc: "СОП-1",
    full: "Штаб СО Новосибирского Государственного Педагогического Университета",
    image: "/static/images/logo/squad-logo.png",
    peoples: 15,
    createdAt: "2022-12-10",
    education: "РГГУ",
  },
  {
    category: "Путинные",
    desc: "СОП-1",
    full: "Штаб СО Новосибирского Государственного Педагогического Университета",
    image: "/static/images/logo/squad-logo.png",
    peoples: 10,
    createdAt: "2022-12-10",
    education: "Амурская государственная медицинская академия",
  },
  {
    category: "Сервисные",
    desc: "СОП-1",
    full: "Штаб СО Новосибирского Государственного Педагогического Университета",
    image: "/static/images/logo/squad-logo.png",
    peoples: 12,
    createdAt: "2022-12-10",
    education: "Амурский государственный университет",
  },
];


const productsContainer = document.querySelector("#headquarters-wrapper");

const productsContainerHorizontal = document.querySelector("#horizontal");

function displayProducts(products) {
  if (products.length > 0) {
    const product_details = products
      .map(
        (product) => `
  <div class="headquarters-wrapper__item">
    <div class="round-img">
      <img src="${product.image}" alt="${product.title}" />
    </div>
    <div class="container">
      <p class="headquarters-wrapper__item-title">${product.desc}</p>
    </div>
  </div>`
      )
      .join("");

    productsContainer.innerHTML = product_details;
  }  else {
    productsContainer.innerHTML = "<h3>Отряд не найден</h3>";
  }

}

function displayHorizontal(products) {
  if (products.length > 0) {
    const product_horizontal = products
      .map(
        (product) => `
  <div class="horizontal-item">
  <div class="horizontal-img">
    <img src="${product.image}" alt="${product.title}" />
  </div>
  <div class="containerHorizontal">
    <p class="headquarters-wrapper__item-category-full">${product.full}</p>
  </div>
  </div>`
      )
      .join("");

      productsContainerHorizontal.innerHTML = product_horizontal;
  }

  else {
    productsContainerHorizontal.innerHTML = "<h3>Отряд не найден</h3>";
  }

}

function allheadquarters(headquarters) {
  displayProducts(headquarters);
  displayHorizontal(headquarters);
}



function changeLayout(val) {
  if (val == 1) {
    document.getElementById("headquarters-wrapper").style.display = "grid";
    document.getElementById("horizontal").style.display = "none";
    document.querySelector(".menu-btn").classList.remove('active-change__menu');
    document.querySelector(".dashboard-btn").classList.remove('active-change');


  } else if (val == 2) {
    document.getElementById("headquarters-wrapper").style.display = "none";
    document.getElementById("horizontal").style.display = "grid";
    document.querySelector(".menu-btn").classList.add('active-change__menu');
    document.querySelector(".dashboard-btn").classList.add('active-change');
  }
}


const sortByDropdown = document.querySelector(".sort-alph");
const sortOrderDropdown = document.querySelector(".sort-order");
const EducationList = document.querySelector(".district-check")
const sortOrderButton = document.querySelector(".sort-orderr");


function setEducations() {
  const allEducations = headquarters.map((product) => product.education);
  const educations = [
    "Окружной штаб",
    ...allEducations.filter((product, index) => {
      return allEducations.indexOf(product) === index;
    }),
  ];
  EducationList.innerHTML = educations
    .map(
      (education) =>
        `<option class="squad-sort__selected">${education}</option>`
    )
    .join("");

  EducationList.addEventListener("change", (e) => {
    const selectedEducation = e.target.value;
    selectedEducation === "Окружной штаб"
      ? allheadquarters(headquarters)
      : allheadquarters(
        headquarters.filter((product) => product.education == selectedEducation)
        );
  });
}

//concat



sortByDropdown.addEventListener("change", () => {
  const sortByValue = sortByDropdown.value; // price or ram value
  const sortOrderValue = sortOrderButton; // asc or desc value
  // const sortByEduc = EducationList.value

  const sorted = _.orderBy(headquarters, [sortByValue], sortOrderValue);

 allheadquarters(sorted);
});

sortOrderButton.addEventListener("click", () => {
  const event = new Event("change");
  const sortByValue = sortByDropdown.value;
  // const sortByEduc= sortByDropdown.value;

  if (sortByValue) {
    sortByDropdown.dispatchEvent(event);
  }
});


const txtSearch = document.querySelector("#search");
txtSearch.addEventListener("keyup", (e) => {
  const value = e.target.value.toLowerCase().trim();
  if (value) {
    allheadquarters(
      headquarters.filter(
        (product) => product.desc.toLowerCase().indexOf(value) !== -1
      )
    );
  } else {
   allheadquarters(headquarters);
  }
});

allheadquarters(headquarters);
setEducations();